<style>
    * {
    padding: 0;
    margin: 0;
}
    .container {
    }

    .container div {

        float: left;
        padding: 5px;
        border:1px solid #000;
    }
</style>

<body>
    <div class="container" id="container">
    </div>

    <button id="start" onclick="sort()">start</button>
    <button id="swap" onclick="swap(1,4)">swap</button>
    <p id="test"></p>
</body>

<script>
    function shuffle(array) {
        array.sort(() => Math.random() - 0.5);
    }
    var arr = [10, 9, 8, 7, 6, 5, 4, 3, 2, 1];
    shuffle(arr);
    var container = document.getElementById('container');
    arr.forEach (x => {
        var bar = document.createElement('div');
        bar.innerHTML = x;
        bar.id = String(x);
        bar.style.height = 50 * x;
        container.appendChild(bar);
    });
    var i = 0;
    var red = true;

    var index = 0;
    var pivot = arr[9];

    var a = -1;

    function swap(i3, j3) {
        var i2 = arr[i3];
        var j2 = arr[j3];
        console.log(document.getElementById(i2));
        console.log(document.getElementById(j2));
        console.log(i2, j2);
        var iHTML = document.getElementById(String(i2));
 
        iHTML.innerHTML = j2;
        iHTML.style.height = 50 * j2;

        var jHTML = document.getElementById(String(j2));
        jHTML.innerHTML = i2;
        jHTML.style.height = 50 * i2;

        iHTML.id = j2;
        jHTML.id = i2;
        
        arr[i3] = j2;
        arr[j3] = i2;
    }


    function sort() {
        setTimeout(function() {  
            if (index == arr.length) {
                index = 0;
            }
            var x = arr[index];
            if (red) {
               document.getElementById(String(x)).style.color = 'red';
                console.log('red' + x);
                red = false;
            } else {
                if (x < pivot) {
                    a += 1;
                    document.getElementById(String(x)).style.color = 'black';
                    console.log('b' + x);
                    console.log(arr[0], arr[1],arr[2],arr[3],arr[4],arr[5], arr[6],arr[7],arr[8],arr[9]);
                    console.log(a, index);
                    red = true;
                    swap(a, index);
                }
                document.getElementById(String(x)).style.color = 'black';
                console.log('b' + x);
                red = true;
            }

                   
            if (i < 1) {   
                i++;         
                sort();
            } else {
                i = 0;
                index++;
                sort();
            }                    
        }, 1000)
    }


    
</script>